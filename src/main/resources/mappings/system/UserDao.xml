<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fzy.core.dao.system.UserDao">

	<sql id="userColumn">
		a.id,
		a.username,
		a.password,
		a.nickname,
		a.status,
		a.type,
		a.remarks
	</sql>


	<select id="findList" resultType="User">
		SELECT
		<include refid="userColumn"/>
		FROM sys_user a
		<where>
			AND a.id > 1
			<if test="username!=null and username!='' ">
				AND a.username LIKE CONCAT('%',#{username},'%')
			</if>
			<if test="nickname!=null and nickname!=''">
				AND a.nickname LIKE CONCAT('%',#{nickname},'%')
			</if>
			<if test="type!=null">
				AND a.type=#{type}
			</if>
			<if test="status!=null">
				AND a.status=#{status}
			</if>
		</where>
	</select>

	<select id="get" resultType="User">
		SELECT
		<include refid="userColumn"/>
		FROM sys_user a
		WHERE a.id=#{id}
	</select>

	<select id="getByUserName" resultType="User">
		SELECT
		<include refid="userColumn"/>
		FROM sys_user a
		WHERE a.username=#{username}
	</select>

	<insert id="insert">
		INSERT INTO sys_user(
			id,
			username,
			password,
			nickname,
			type,
			remarks
		) VALUES (
			#{id},
			#{username},
			#{password},
			#{nickname},
			#{type},
			#{remarks}
		)
	</insert>

	<update id="update" parameterType="User">
		UPDATE sys_user
		<set>
			<if test="password !=null and password !='' ">
				password=#{password},
			</if>
			<if test="nickname != null ">
				nickname=#{nickname},
			</if>
			<if test="type != null">
				type = #{type},
			</if>
			<if test="status != null">
				status=#{status},
			</if>
			<if test="remarks != null ">
				remarks=#{remarks},
			</if>
		</set>
		WHERE id=#{id}
	</update>

	<delete id="delete">
		DELETE FROM sys_user
		WHERE id=#{id}
	</delete>


</mapper>